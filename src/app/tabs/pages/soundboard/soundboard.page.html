<ion-header [translucent]="false">
  <ion-toolbar color="primary">
    <ion-title>
      <span> {{ this.translate_service.translate('TITLE_SOUNDBOARD') }} <img class="cat_icon" src="assets/icon/app_icon.svg"> </span>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="container">
    <ion-searchbar [placeholder]="this.translate_service.translate('SEARCH_PLACEHOLDER')" [(ngModel)]="this.search" animated *ngIf="this.settings_service.settings.canSearch"></ion-searchbar>
    <ion-card class="item" [class.item_expanded]="monster.expanded && this.settings_service.settings.hasImage" *ngFor="let monster of this.storage_service.monsters"
    [class.item_hidden]="(!monster.name.toLowerCase().includes(this.search.toLowerCase()) && this.search !== '') && this.settings_service.settings.canSearch">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-top: -8px;">
        <ion-text color="primary" class="name" style="display: flex; align-items: center;">
          <ion-icon class="ion-activatable ripple-parent" (click)="monster.expanded = !monster.expanded" style="margin-right: 8px; height: 2em; width: 2em;"
          name="{{ monster.expanded ? 'close-circle' : 'help-circle'}}" *ngIf="this.settings_service.settings.hasImage"></ion-icon>
          {{ monster.name }}
        </ion-text>
        <span style="display: flex; flex-direction: row;">
          <ion-fab-button *ngIf="monster.cloud != null" color="medium" style="--box-shadow: none; --background-color: transparent; margin-right: 8px;" (click)="cloud(monster)">
            <ion-icon name="{{ monster.cloud ? 'cloud-done' : 'save' }}" [ngStyle]="{ 'display' : (!monster.isCloudLoading) ? 'block' : 'none' }"></ion-icon>
            <img src="assets/loader.svg" [ngStyle]="{ 'display' : (monster.isCloudLoading) ? 'block' : 'none' }">
          </ion-fab-button>
          <ion-fab-button color="{{ monster.audio.paused ? 'primary' : 'danger' }}" (click)="playAudio(monster)">
            <ion-icon name="{{ monster.audio.paused ? 'play' : 'stop' }}"></ion-icon>
          </ion-fab-button>
        </span>
      </div>
      <div class="desc" [ngStyle]="{ 'background-image' : 'url(' + monster.imgSRC + ')' }" *ngIf="monster.expanded && this.settings_service.settings.hasImage"></div>      
    </ion-card>
  </div>

</ion-content>
